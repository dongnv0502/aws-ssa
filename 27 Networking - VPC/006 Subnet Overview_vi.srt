1
00:00:00,080 --> 00:00:01,170
Bước tiếp theo là

2
00:00:01,170 --> 00:00:03,260
thêm các subnet vào VPC của chúng ta.

3
00:00:03,260 --> 00:00:04,580
Chúng ta sẽ tạo hai subnet:

4
00:00:04,580 --> 00:00:05,950
một public subnet

5
00:00:05,950 --> 00:00:07,920
và một private subnet.

6
00:00:07,920 --> 00:00:10,540
Tạm thời cả hai sẽ ở cùng một Availability Zone,

7
00:00:10,540 --> 00:00:13,190
và ta sẽ xem điều gì làm subnet thành “public”

8
00:00:13,190 --> 00:00:15,180
hay “private”.

9
00:00:15,180 --> 00:00:17,610
Trước hết, subnet là gì?

10
00:00:17,610 --> 00:00:19,760
Subnet là một dải con địa chỉ IPv4

11
00:00:19,760 --> 00:00:23,110
nằm trong VPC của bạn.

12
00:00:23,110 --> 00:00:25,000
Trong mỗi dải này,

13
00:00:25,000 --> 00:00:27,370
AWS sẽ giữ lại 5 địa chỉ IP.

14
00:00:27,370 --> 00:00:30,520
Bốn IP đầu và IP cuối cùng bị giữ lại

15
00:00:30,520 --> 00:00:31,740
trong mỗi subnet.

16
00:00:31,740 --> 00:00:33,880
Các địa chỉ này không thể sử dụng,

17
00:00:33,880 --> 00:00:37,020
không thể gán làm IP cho EC2 instance.

18
00:00:37,020 --> 00:00:37,853
Ví dụ,

19
00:00:37,853 --> 00:00:41,320
nếu có CIDR 10.0.0.0/24

20
00:00:41,320 --> 00:00:43,700
thì sẽ có một vài IP bị giữ lại.

21
00:00:43,700 --> 00:00:44,890
Chẳng hạn IP đầu tiên

22
00:00:44,890 --> 00:00:46,090
là địa chỉ mạng (network address),

23
00:00:46,090 --> 00:00:46,923
IP thứ hai

24
00:00:46,923 --> 00:00:49,840
tức .1 — dành cho VPC router của AWS,

25
00:00:49,840 --> 00:00:52,440
IP .2 — dành cho ánh xạ tới DNS do Amazon cung cấp,

26
00:00:52,440 --> 00:00:53,820
điều này rất quan trọng,

27
00:00:53,820 --> 00:00:55,397
IP .3 — chưa dùng

28
00:00:55,397 --> 00:00:56,660
nhưng được dành cho tương lai,

29
00:00:56,660 --> 00:00:58,870
và IP .255 — địa chỉ broadcast.

30
00:00:58,870 --> 00:01:02,090
Vì AWS không hỗ trợ broadcast trong VPC,

31
00:01:02,090 --> 00:01:04,950
địa chỉ này bị giữ lại và không dùng được, rõ chưa?

32
00:01:04,950 --> 00:01:07,670
Mẹo thi: nếu bạn cần 29 địa chỉ IP trong một subnet

33
00:01:07,670 --> 00:01:08,760
cho EC2 instance,

34
00:01:08,760 --> 00:01:11,140
thì không thể chọn subnet /27

35
00:01:11,140 --> 00:01:12,820
vì /27 có 32 IP.

36
00:01:12,820 --> 00:01:15,650
Nhưng nếu trừ đi 5 IP bị giữ lại,

37
00:01:15,650 --> 00:01:19,490
chỉ còn 27 IP — ít hơn 29 bạn cần.

38
00:01:19,490 --> 00:01:21,640
Vậy phải chọn subnet /26

39
00:01:21,640 --> 00:01:23,280
vì /26 có 64 IP trong subnet.

40
00:01:23,280 --> 00:01:25,630
Trừ đi 5 IP bị giữ lại còn 59 IP,

41
00:01:25,630 --> 00:01:28,210
lớn hơn 29 bạn cần, hiểu chứ?

42
00:01:28,210 --> 00:01:30,630
Hẹn gặp bạn ở bài sau để tạo các subnet đầu tiên.

43
00:01:30,630 --> 00:01:33,250

44
00:01:33,250 --> 00:01:34,620

45
00:01:34,620 --> 00:01:37,760

46
00:01:37,760 --> 00:01:39,130

47
00:01:39,130 --> 00:01:40,530

