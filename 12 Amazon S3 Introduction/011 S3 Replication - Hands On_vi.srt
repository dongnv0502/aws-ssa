1
00:00:00,330 --> 00:00:01,890
Thực hành S3 Replication.

2
00:00:01,890 --> 00:00:05,730
Tạo Origin bucket (bật Versioning) ở một region (ví dụ eu-west-1).

3
00:00:05,730 --> 00:00:11,790
Ví dụ đặt tên: s3-stephane-bucket-origin-v2.

4
00:00:11,790 --> 00:00:18,390
Tạo Target bucket (bật Versioning) ở region khác (ví dụ us-east-1) để CRR.

5
00:00:18,390 --> 00:00:24,900
Ví dụ đặt tên: s3-stephane-bucket-replica-v2.

6
00:00:24,900 --> 00:00:33,960
Upload một file (beach.jpg) vào origin. Chưa có replication vì chưa cấu hình rule.

7
00:00:33,960 --> 00:00:44,760
Trong Origin → Management → Replication rules → Create rule (DemoReplicationRule).

8
00:00:44,760 --> 00:00:55,500
Enable rule; Scope: All objects. Destination: chọn Target bucket (cùng/tài khoản khác đều được).

9
00:00:55,500 --> 00:01:06,000
S3 nhận diện destination region (ví dụ us-east-1) → đây là Cross-Region Replication.

10
00:01:06,000 --> 00:01:15,000
IAM role: chọn tạo role mới tự động. Lưu rule.

11
00:01:15,000 --> 00:01:26,040
Hộp thoại hỏi có replicate existing objects không: replication chỉ áp dụng cho object mới.

12
00:01:26,040 --> 00:01:33,500
Nếu cần replicate object cũ, dùng S3 Batch Operations (tuỳ chọn). Ở đây chọn No.

13
00:01:33,500 --> 00:01:44,700
Tải lên object mới vào origin → xem target sau một lúc sẽ xuất hiện bản sao (kèm Version ID).

14
00:01:44,700 --> 00:01:55,890
Version ID được replicate. Để replicate beach.jpg cũ, hãy upload version mới của file.

15
00:01:55,890 --> 00:02:10,850
Thiết lập quan trọng: Delete marker replication (mặc định off). Bật để replicate delete marker.

16
00:02:10,850 --> 00:02:20,940
Khi bật, xoá một object ở origin (trên bucket có versioning sẽ tạo delete marker)

17
00:02:20,940 --> 00:02:31,800
→ delete marker sẽ được replicate sang target (đồng bộ trạng thái xoá).

18
00:02:31,800 --> 00:02:41,140
Tổng kết: Bật versioning ở cả hai bucket, tạo replication rule, chọn destination,

19
00:02:41,140 --> 00:02:50,300
hiểu phạm vi (chỉ object mới), và tuỳ chọn replicate delete markers.

