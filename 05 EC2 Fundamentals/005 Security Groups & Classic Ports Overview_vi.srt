1
00:00:00,000 --> 00:00:02,460
Hãy nói về “firewall” quanh EC2 instances.

2
00:00:02,460 --> 00:00:04,470
Ta đã cấu hình sơ bộ ở bài trước,

3
00:00:04,470 --> 00:00:06,900
và Security Group thực sự là nền tảng

4
00:00:06,900 --> 00:00:08,430
cho bảo mật mạng trên AWS.

5
00:00:08,430 --> 00:00:12,600
Chúng kiểm soát lưu lượng vào/ra EC2 instance.

6
00:00:12,600 --> 00:00:14,640
Security Group rất đơn giản: chỉ có allow rules

7
00:00:14,640 --> 00:00:17,820
(cho phép vào/ra), không có deny.

8
00:00:17,820 --> 00:00:20,550
Rule có thể tham chiếu theo IP hoặc theo Security Group khác.

9
00:00:20,550 --> 00:00:22,170
Ví dụ: máy bạn trên Internet

10
00:00:22,170 --> 00:00:23,820
muốn truy cập EC2 instance.

11
00:00:23,820 --> 00:00:27,030
Ta gắn một Security Group (firewall) cho instance,

12
00:00:27,030 --> 00:00:29,190
định nghĩa inbound (từ ngoài vào) có được phép không,

13
00:00:29,190 --> 00:01:00,180
và outbound (từ instance ra ngoài) có được phép không.

14
00:01:00,180 --> 00:01:04,680
Security Group là firewall ở mức cổng (port) và IP (IPv4/IPv6),

15
00:01:04,680 --> 00:01:08,490
kiểm soát inbound (ngoài → instance) và outbound (instance → ngoài).

16
00:01:08,490 --> 00:01:12,630
Một rule có: Type, Protocol (ví dụ TCP), Port, Source (CIDR).

17
00:01:12,630 --> 00:01:14,130
`0.0.0.0/0` nghĩa là mọi nơi;

18
00:01:14,130 --> 00:01:17,280
một địa chỉ IP riêng lẻ nghĩa là chỉ máy đó.

19
00:01:17,280 --> 00:01:23,040
Ví dụ: inbound cho phép IP của bạn vào port 22 (SSH),

20
00:01:23,040 --> 00:01:27,090
nhưng máy khác (IP khác) sẽ bị firewall chặn (timeout).

21
00:01:27,090 --> 00:01:41,400
Outbound mặc định: allow all — instance có thể chủ động kết nối ra ngoài.

22
00:01:41,400 --> 00:01:54,990
Lưu ý:
- Một Security Group có thể gắn cho nhiều instance; một instance cũng có thể có nhiều Security Group.
- Security Group gắn với cặp Region/VPC: đổi Region hoặc tạo VPC mới phải tạo lại SG.
- SG nằm bên ngoài EC2: gói bị chặn thì instance không thấy gì cả.
- Thực hành tốt: tách một SG dành riêng cho SSH.

23
00:02:53,160 --> 00:02:57,150
Phân biệt lỗi kết nối:
- Treo/đợi rồi timeout: thường do Security Group chặn.
- "Connection refused": SG cho qua, nhưng ứng dụng không chạy/port không lắng nghe.

24
00:03:19,740 --> 00:03:25,920
Mặc định: inbound bị chặn hết; outbound được phép hết.

25
00:03:25,920 --> 00:03:34,260
Tính năng hay: tham chiếu Security Group khác trong rule (hữu ích với Load Balancer, v.v.).

26
00:03:34,260 --> 00:03:45,900
Ví dụ: SG của Instance A cho phép inbound từ SG-1 và SG-2.
Instance B gắn SG-2 sẽ được phép vào A trên các port được chỉ định.

