1
00:00:00,210 --> 00:00:02,460
Giờ hãy nói về S3 Access Logs.

2
00:00:02,460 --> 00:00:03,570
Vì mục đích kiểm toán,

3
00:00:03,570 --> 00:00:05,700
bạn có thể muốn ghi lại mọi truy cập

4
00:00:05,700 --> 00:00:07,020
vào S3 bucket của mình.

5
00:00:07,020 --> 00:00:08,880
Nghĩa là bất kỳ request nào

6
00:00:08,880 --> 00:00:10,830
đến S3 bucket của bạn từ bất kỳ account nào,

7
00:00:10,830 --> 00:00:13,140
dù được cho phép hay bị từ chối,

8
00:00:13,140 --> 00:00:16,920
sẽ được ghi thành file vào một S3 bucket khác.

9
00:00:16,920 --> 00:00:20,370
Dữ liệu đó có thể được phân tích bằng công cụ

10
00:00:20,370 --> 00:00:22,440
như Amazon Athena.

11
00:00:22,440 --> 00:00:25,020
Bucket ghi log mục tiêu cũng phải

12
00:00:25,020 --> 00:00:26,550
ở cùng region AWS.

13
00:00:26,550 --> 00:00:27,510
Vậy nó hoạt động ra sao?

14
00:00:27,510 --> 00:00:30,270
Bạn sẽ gửi request tới S3 bucket,

15
00:00:30,270 --> 00:00:33,840
rồi bật access logs.

16
00:00:33,840 --> 00:00:36,000
Khi đó mọi request sẽ được ghi

17
00:00:36,000 --> 00:00:38,070
vào bucket ghi log.

18
00:00:38,070 --> 00:00:40,590
Các log này có định dạng cụ thể,

19
00:00:40,590 --> 00:00:42,750
và bạn có thể xem tại URL này

20
00:00:42,750 --> 00:00:44,220
để biết định dạng log.

21
00:00:44,220 --> 00:00:46,680
Có một lưu ý nhỏ với access logs.

22
00:00:46,680 --> 00:00:49,410
Đừng bao giờ đặt bucket ghi log trùng

23
00:00:49,410 --> 00:00:51,300
với bucket bạn đang giám sát,

24
00:00:51,300 --> 00:00:53,460
vì sẽ tạo vòng lặp logging

25
00:00:53,460 --> 00:00:54,690
và vô hạn

26
00:00:54,690 --> 00:00:57,300
khiến bucket phình to theo cấp số nhân.

27
00:00:57,300 --> 00:00:58,230
Điều đó nghĩa là gì?

28
00:00:58,230 --> 00:00:59,430
Khi bạn đặt object,

29
00:00:59,430 --> 00:01:02,400
mà bucket ứng dụng và bucket log giống nhau.

30
00:01:02,400 --> 00:01:04,290
Khi đó sẽ có vòng lặp logging

31
00:01:04,290 --> 00:01:06,690
bạn sẽ ghi đi ghi lại

32
00:01:06,690 --> 00:01:09,330
và phải trả rất nhiều tiền.

33
00:01:09,330 --> 00:01:11,220
Vì vậy đừng thử ở nhà.

34
00:01:11,220 --> 00:01:13,470
Đó là tất cả về S3 access logs.

35
00:01:13,470 --> 00:01:14,430
Hy vọng bạn thích bài học,

36
00:01:14,430 --> 00:01:16,380
hẹn gặp lại ở bài tiếp theo.
