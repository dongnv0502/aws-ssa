1
00:00:00,000 --> 00:00:01,990
Chúng ta cùng giới thiệu ngắn

2
00:00:01,990 --> 00:00:03,150
về Amazon ECR.

3
00:00:03,150 --> 00:00:04,590
Amazon ECR viết tắt

4
00:00:04,590 --> 00:00:06,880
của Elastic Container Registry,

5
00:00:06,880 --> 00:00:07,830
và dùng để lưu trữ

6
00:00:07,830 --> 00:00:10,820
và quản lý Docker image trên AWS.

7
00:00:10,820 --> 00:00:13,090
Trước giờ chúng ta dùng kho trực tuyến

8
00:00:13,090 --> 00:00:14,120
như Docker Hub

9
00:00:14,120 --> 00:00:16,100
nhưng ta cũng có thể lưu image của mình

10
00:00:16,100 --> 00:00:17,520
trên Amazon ECR.

11
00:00:17,520 --> 00:00:19,360
Thực ra ECR có hai tùy chọn.

12
00:00:19,360 --> 00:00:21,110
Chúng ta có thể lưu ảnh riêng tư,

13
00:00:21,110 --> 00:00:22,480
chỉ cho tài khoản của bạn

14
00:00:22,480 --> 00:00:23,930
hoặc các tài khoản của bạn

15
00:00:23,930 --> 00:00:25,040
với nhiều tài khoản,

16
00:00:25,040 --> 00:00:28,020
hoặc dùng kho công khai và xuất bản

17
00:00:28,020 --> 00:00:31,250
lên Amazon ECR public gallery.

18
00:00:31,250 --> 00:00:33,150
ECR tích hợp hoàn toàn

19
00:00:33,150 --> 00:00:33,983
với Amazon ECS,

20
00:00:33,983 --> 00:00:34,816
rất tuyệt.

21
00:00:34,816 --> 00:00:35,920
Các image của bạn

22
00:00:35,920 --> 00:00:37,380
được lưu phía sau

23
00:00:37,380 --> 00:00:39,080
bởi Amazon S3.

24
00:00:39,080 --> 00:00:40,180
Vì vậy kho ECR của bạn

25
00:00:40,180 --> 00:00:42,120
có thể chứa nhiều Docker image khác nhau

26
00:00:42,120 --> 00:00:43,530
và cụm ECS của bạn.

27
00:00:43,530 --> 00:00:44,363
Ví dụ,

28
00:00:44,363 --> 00:00:45,370
một EC2 instance

29
00:00:45,370 --> 00:00:47,360
trong cụm ECS có thể muốn

30
00:00:47,360 --> 00:00:49,140
kéo các image này.

31
00:00:49,140 --> 00:00:50,090
Để làm vậy

32
00:00:50,090 --> 00:00:50,923
chúng ta sẽ

33
00:00:50,923 --> 00:00:52,130
gán một IAM role

34
00:00:52,130 --> 00:00:53,670
cho EC2 instance

35
00:00:53,670 --> 00:00:55,940
và role này cho phép instance của chúng ta

36
00:00:55,940 --> 00:00:57,580
kéo Docker image.

37
00:00:57,580 --> 00:00:59,370
Tất nhiên, mọi truy cập

38
00:00:59,370 --> 00:01:01,860
tới ECR đều được IAM bảo vệ.

39
00:01:01,860 --> 00:01:03,930
Nghĩa là nếu bạn gặp lỗi quyền

40
00:01:03,930 --> 00:01:05,530
trên ECR hãy xem

41
00:01:05,530 --> 00:01:06,680
các policy của bạn

42
00:01:06,680 --> 00:01:07,770
rồi container của bạn

43
00:01:07,770 --> 00:01:08,603
sẽ được

44
00:01:08,603 --> 00:01:09,436
khởi chạy

45
00:01:09,436 --> 00:01:10,900
trên EC2 instance

46
00:01:10,900 --> 00:01:12,360
sau khi được kéo

47
00:01:12,360 --> 00:01:13,770
bởi EC2 instance.

48
00:01:13,770 --> 00:01:15,480
Và đó là cách ECS

49
00:01:15,480 --> 00:01:18,580
và ECR phối hợp với nhau.

50
00:01:18,580 --> 00:01:19,720
Amazon ECR rất tuyệt

51
00:01:19,720 --> 00:01:20,553
vì ngoài

52
00:01:20,553 --> 00:01:22,080
việc là kho,

53
00:01:22,080 --> 00:01:24,080
nó hỗ trợ quét lỗ hổng image,

54
00:01:24,080 --> 00:01:26,730
phiên bản, thẻ image,

55
00:01:26,730 --> 00:01:28,830
và vòng đời image.

56
00:01:28,830 --> 00:01:29,951
Nói chung, bất cứ khi nào bạn thấy

57
00:01:29,951 --> 00:01:32,750
lưu trữ Docker image hãy nghĩ tới ECR

58
00:01:32,750 --> 00:01:33,583
và đó là mọi thứ

59
00:01:33,583 --> 00:01:34,940
bạn cần cho kỳ thi.

60
00:01:34,940 --> 00:01:35,773
Được rồi.

61
00:01:35,773 --> 00:01:36,606
Hy vọng bạn thích.

62
00:01:36,606 --> 00:01:37,439
Hẹn gặp bạn

63
00:01:37,439 --> 00:01:38,330
ở bài giảng tiếp theo.
